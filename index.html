<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Fitness API - Clean Architecture Template</title>
    <style>
        :root {
            --color-bg-primary: #1a1a2e;
            --color-bg-secondary: #16213e;
            --color-bg-tertiary: #0f3460;
            --color-accent: #e94560;
            --color-accent-light: #ff6b85;
            --color-success: #00d9a3;
            --color-text: #f5f5f5;
            --color-text-secondary: #b8b8b8;
            --color-border: #2d3561;
            --font-mono: 'Monaco', 'Menlo', 'Consolas', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: var(--color-bg-secondary);
            border-radius: 16px;
            margin-bottom: 30px;
            border: 1px solid var(--color-border);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--color-text-secondary);
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            color: var(--color-text);
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: var(--color-bg-tertiary);
            border-color: var(--color-accent);
        }

        .tab-btn.active {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: white;
        }

        .tab-content {
            display: none;
            background: var(--color-bg-secondary);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--color-border);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: var(--color-accent);
            margin-bottom: 15px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: var(--color-text);
            margin: 20px 0 10px 0;
            font-size: 1.2em;
        }

        .code-block {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
        }

        .code-block pre {
            font-family: var(--font-mono);
            font-size: 0.9em;
            color: var(--color-text);
            line-height: 1.5;
            white-space: pre;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 6px 12px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text);
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
        }

        .file-tree {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            font-family: var(--font-mono);
            font-size: 0.9em;
            line-height: 1.8;
        }

        .file-tree .folder { color: #ffd700; }
        .file-tree .file { color: var(--color-success); }
        .file-tree .comment { color: var(--color-text-secondary); }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
        }

        .card h4 {
            color: var(--color-accent);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .card p {
            color: var(--color-text-secondary);
            font-size: 0.95em;
        }

        .feature-list {
            list-style: none;
            margin: 15px 0;
        }

        .feature-list li {
            padding: 8px 0 8px 30px;
            position: relative;
            color: var(--color-text-secondary);
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--color-success);
            font-weight: bold;
            font-size: 1.2em;
        }

        .info-box {
            background: var(--color-bg-tertiary);
            border-left: 4px solid var(--color-accent);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .info-box h4 {
            color: var(--color-accent);
            margin-bottom: 8px;
        }

        .endpoint {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            margin: 10px 0;
            font-family: var(--font-mono);
            font-size: 0.9em;
        }

        .method {
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85em;
            min-width: 60px;
            text-align: center;
        }

        .method.post { background: var(--color-success); color: var(--color-bg-primary); }
        .method.get { background: #61affe; color: var(--color-bg-primary); }
        .method.put { background: #fca130; color: var(--color-bg-primary); }
        .method.delete { background: var(--color-accent); color: white; }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            font-size: 0.85em;
            color: var(--color-text-secondary);
            margin: 3px;
        }

        .command {
            background: var(--color-bg-primary);
            padding: 12px 16px;
            border-radius: 6px;
            font-family: var(--font-mono);
            font-size: 0.9em;
            border: 1px solid var(--color-border);
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .command code {
            color: var(--color-success);
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .tabs { flex-direction: column; }
            .tab-btn { width: 100%; }
            .code-block { padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèãÔ∏è Go Fitness API</h1>
            <p>Production-Ready Backend with Clean Architecture</p>
            <p style="margin-top: 10px;">
                <span class="badge">Go 1.21+</span>
                <span class="badge">PostgreSQL</span>
                <span class="badge">JWT Auth</span>
                <span class="badge">Clean Architecture</span>
                <span class="badge">REST API</span>
            </p>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('overview')">üìã Overview</button>
            <button class="tab-btn" onclick="showTab('structure')">üìÅ Structure</button>
            <button class="tab-btn" onclick="showTab('domain')">üéØ Domain</button>
            <button class="tab-btn" onclick="showTab('usecase')">‚öôÔ∏è Use Cases</button>
            <button class="tab-btn" onclick="showTab('repository')">üíæ Repository</button>
            <button class="tab-btn" onclick="showTab('handlers')">üåê Handlers</button>
            <button class="tab-btn" onclick="showTab('main')">üöÄ Setup</button>
            <button class="tab-btn" onclick="showTab('api')">üì° API Docs</button>
        </div>

        <div id="overview" class="tab-content active">
            <div class="section">
                <h2>üéØ Project Overview</h2>
                <p>A complete fitness tracking backend built with Go and Clean Architecture principles. Perfect starting point for your fitness mobile app with React Native (Expo).</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h4>üèóÔ∏è Architecture</h4>
                    <p>Clean Architecture with clear separation of concerns, making the codebase testable, maintainable, and scalable.</p>
                    <ul class="feature-list">
                        <li>Domain Layer (entities)</li>
                        <li>Use Case Layer (business logic)</li>
                        <li>Repository Layer (data access)</li>
                        <li>Delivery Layer (HTTP/gRPC)</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>‚ú® Features</h4>
                    <ul class="feature-list">
                        <li>User authentication (JWT)</li>
                        <li>Workout logging & tracking</li>
                        <li>Exercise library management</li>
                        <li>Progress analytics</li>
                        <li>Social feed ready</li>
                        <li>ML recommendation ready</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>üõ†Ô∏è Tech Stack</h4>
                    <ul class="feature-list">
                        <li>Go 1.21+ (latest features)</li>
                        <li>PostgreSQL (robust RDBMS)</li>
                        <li>Gin/Fiber (HTTP framework)</li>
                        <li>JWT (authentication)</li>
                        <li>Docker (containerization)</li>
                        <li>Migrate (DB migrations)</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>üé® Design Principles</h4>
                    <ul class="feature-list">
                        <li>Dependency Injection</li>
                        <li>Interface-based design</li>
                        <li>Repository pattern</li>
                        <li>SOLID principles</li>
                        <li>Testable architecture</li>
                        <li>Context-aware operations</li>
                    </ul>
                </div>
            </div>

            <div class="info-box">
                <h4>üöÄ Quick Start</h4>
                <p>Follow the <strong>Setup</strong> tab to initialize your project, or jump to specific layers to understand the implementation details.</p>
            </div>
        </div>

        <div id="structure" class="tab-content">
            <div class="section">
                <h2>üìÅ Project Structure</h2>
                <p>Standard Go project layout following Clean Architecture principles:</p>
                
                <div class="file-tree">
fitness-api/
‚îú‚îÄ‚îÄ <span class="folder">cmd/</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">server/</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">main.go</span>              <span class="comment"># Entry point</span>
‚îú‚îÄ‚îÄ <span class="folder">internal/</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">domain/</span>                    <span class="comment"># Domain Layer</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">user.go</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">workout.go</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">exercise.go</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">workout_log.go</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">errors.go</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">usecase/</span>                   <span class="comment"># Business Logic</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">user_usecase.go</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">workout_usecase.go</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">exercise_usecase.go</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">auth_usecase.go</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">repository/</span>                <span class="comment"># Data Layer</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">repository.go</span>        <span class="comment"># Interfaces</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">postgres/</span>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">user_repository.go</span>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">workout_repository.go</span>
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">exercise_repository.go</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">delivery/</span>                  <span class="comment"># HTTP Layer</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="folder">http/</span>
‚îÇ           ‚îú‚îÄ‚îÄ <span class="file">router.go</span>
‚îÇ           ‚îú‚îÄ‚îÄ <span class="folder">handler/</span>
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">user_handler.go</span>
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">workout_handler.go</span>
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">exercise_handler.go</span>
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">auth_handler.go</span>
‚îÇ           ‚îî‚îÄ‚îÄ <span class="folder">middleware/</span>
‚îÇ               ‚îú‚îÄ‚îÄ <span class="file">auth.go</span>
‚îÇ               ‚îú‚îÄ‚îÄ <span class="file">cors.go</span>
‚îÇ               ‚îî‚îÄ‚îÄ <span class="file">logger.go</span>
‚îú‚îÄ‚îÄ <span class="folder">pkg/</span>                          <span class="comment"># Public packages</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">jwt/</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">jwt.go</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">validator/</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">validator.go</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">password/</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">hash.go</span>
‚îú‚îÄ‚îÄ <span class="folder">config/</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">config.go</span>
‚îú‚îÄ‚îÄ <span class="folder">migrations/</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">001_create_users.up.sql</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">002_create_exercises.up.sql</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">003_create_workouts.up.sql</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">004_create_workout_logs.up.sql</span>
‚îú‚îÄ‚îÄ <span class="file">Dockerfile</span>
‚îú‚îÄ‚îÄ <span class="file">docker-compose.yml</span>
‚îú‚îÄ‚îÄ <span class="file">.env.example</span>
‚îú‚îÄ‚îÄ <span class="file">go.mod</span>
‚îú‚îÄ‚îÄ <span class="file">go.sum</span>
‚îî‚îÄ‚îÄ <span class="file">README.md</span>
                </div>
            </div>
        </div>

        <div id="domain" class="tab-content">
            <div class="section">
                <h2>üéØ Domain Layer</h2>
                <p>Core business entities and rules with zero external dependencies.</p>

                <h3>User Entity (internal/domain/user.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package domain

import "time"

type User struct {
    ID        int64     `json:"id"`
    Email     string    `json:"email"`
    Username  string    `json:"username"`
    Password  string    `json:"-"`
    FullName  string    `json:"full_name"`
    Bio       string    `json:"bio"`
    Weight    float64   `json:"weight"`     // Current weight in kg
    Height    float64   `json:"height"`     // Height in cm
    CreatedAt time.Time `json:"created_at"`
    UpdatedAt time.Time `json:"updated_at"`
}

func (u *User) Validate() error {
    if u.Email == "" {
        return ErrInvalidEmail
    }
    if u.Username == "" || len(u.Username) < 3 {
        return ErrInvalidUsername
    }
    if len(u.Password) < 8 {
        return ErrPasswordTooShort
    }
    return nil
}</pre>
                </div>

                <h3>Workout Entity (internal/domain/workout.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package domain

import "time"

type Workout struct {
    ID          int64     `json:"id"`
    UserID      int64     `json:"user_id"`
    Name        string    `json:"name"`
    Description string    `json:"description"`
    StartTime   time.Time `json:"start_time"`
    EndTime     *time.Time `json:"end_time"`
    Duration    int       `json:"duration"` // Duration in seconds
    Notes       string    `json:"notes"`
    CreatedAt   time.Time `json:"created_at"`
    UpdatedAt   time.Time `json:"updated_at"`
}

type Exercise struct {
    ID          int64  `json:"id"`
    Name        string `json:"name"`
    Description string `json:"description"`
    Category    string `json:"category"`    // e.g., "Strength", "Cardio"
    MuscleGroup string `json:"muscle_group"` // e.g., "Chest", "Legs"
    Equipment   string `json:"equipment"`    // e.g., "Barbell", "Dumbbell"
    VideoURL    string `json:"video_url"`
    CreatedAt   time.Time `json:"created_at"`
}

type WorkoutLog struct {
    ID         int64     `json:"id"`
    WorkoutID  int64     `json:"workout_id"`
    ExerciseID int64     `json:"exercise_id"`
    Sets       int       `json:"sets"`
    Reps       int       `json:"reps"`
    Weight     float64   `json:"weight"`     // Weight in kg
    Duration   int       `json:"duration"`   // For cardio, in seconds
    Distance   float64   `json:"distance"`   // For cardio, in km
    Notes      string    `json:"notes"`
    CreatedAt  time.Time `json:"created_at"`
}</pre>
                </div>

                <h3>Error Definitions (internal/domain/errors.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package domain

import "errors"

var (
    // User errors
    ErrUserNotFound      = errors.New("user not found")
    ErrInvalidEmail      = errors.New("invalid email address")
    ErrInvalidUsername   = errors.New("username must be at least 3 characters")
    ErrPasswordTooShort  = errors.New("password must be at least 8 characters")
    ErrDuplicateEmail    = errors.New("email already exists")
    ErrDuplicateUsername = errors.New("username already exists")
    
    // Auth errors
    ErrInvalidCredentials = errors.New("invalid email or password")
    ErrUnauthorized       = errors.New("unauthorized")
    ErrInvalidToken       = errors.New("invalid token")
    
    // Workout errors
    ErrWorkoutNotFound = errors.New("workout not found")
    ErrInvalidWorkout  = errors.New("invalid workout data")
    
    // Exercise errors
    ErrExerciseNotFound = errors.New("exercise not found")
    ErrInvalidExercise  = errors.New("invalid exercise data")
)</pre>
                </div>
            </div>
        </div>

        <div id="usecase" class="tab-content">
            <div class="section">
                <h2>‚öôÔ∏è Use Case Layer</h2>
                <p>Business logic orchestration and repository interfaces.</p>

                <h3>User Use Case (internal/usecase/user_usecase.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package usecase

import (
    "context"
    "fitness-api/internal/domain"
    "fitness-api/internal/repository"
    "fitness-api/pkg/password"
)

type UserUseCase interface {
    Register(ctx context.Context, user *domain.User) error
    GetByID(ctx context.Context, id int64) (*domain.User, error)
    GetByEmail(ctx context.Context, email string) (*domain.User, error)
    Update(ctx context.Context, user *domain.User) error
    Delete(ctx context.Context, id int64) error
    UpdateWeight(ctx context.Context, userID int64, weight float64) error
}

type userUseCase struct {
    userRepo repository.UserRepository
}

func NewUserUseCase(userRepo repository.UserRepository) UserUseCase {
    return &userUseCase{userRepo: userRepo}
}

func (u *userUseCase) Register(ctx context.Context, user *domain.User) error {
    if err := user.Validate(); err != nil {
        return err
    }
    
    // Check for duplicate email
    existing, err := u.userRepo.GetByEmail(ctx, user.Email)
    if err == nil && existing != nil {
        return domain.ErrDuplicateEmail
    }
    
    // Check for duplicate username
    existing, err = u.userRepo.GetByUsername(ctx, user.Username)
    if err == nil && existing != nil {
        return domain.ErrDuplicateUsername
    }
    
    // Hash password
    hashedPassword, err := password.Hash(user.Password)
    if err != nil {
        return err
    }
    user.Password = hashedPassword
    
    return u.userRepo.Create(ctx, user)
}

func (u *userUseCase) GetByID(ctx context.Context, id int64) (*domain.User, error) {
    return u.userRepo.GetByID(ctx, id)
}

func (u *userUseCase) GetByEmail(ctx context.Context, email string) (*domain.User, error) {
    return u.userRepo.GetByEmail(ctx, email)
}

func (u *userUseCase) Update(ctx context.Context, user *domain.User) error {
    if err := user.Validate(); err != nil {
        return err
    }
    return u.userRepo.Update(ctx, user)
}

func (u *userUseCase) Delete(ctx context.Context, id int64) error {
    return u.userRepo.Delete(ctx, id)
}

func (u *userUseCase) UpdateWeight(ctx context.Context, userID int64, weight float64) error {
    user, err := u.userRepo.GetByID(ctx, userID)
    if err != nil {
        return err
    }
    user.Weight = weight
    return u.userRepo.Update(ctx, user)
}</pre>
                </div>

                <h3>Workout Use Case (internal/usecase/workout_usecase.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package usecase

import (
    "context"
    "fitness-api/internal/domain"
    "fitness-api/internal/repository"
    "time"
)

type WorkoutUseCase interface {
    Create(ctx context.Context, workout *domain.Workout) error
    GetByID(ctx context.Context, id int64) (*domain.Workout, error)
    GetUserWorkouts(ctx context.Context, userID int64, limit, offset int) ([]*domain.Workout, error)
    Update(ctx context.Context, workout *domain.Workout) error
    Delete(ctx context.Context, id int64) error
    EndWorkout(ctx context.Context, workoutID int64) error
    
    // Workout logs
    AddWorkoutLog(ctx context.Context, log *domain.WorkoutLog) error
    GetWorkoutLogs(ctx context.Context, workoutID int64) ([]*domain.WorkoutLog, error)
    GetUserProgress(ctx context.Context, userID int64, exerciseID int64, days int) ([]*domain.WorkoutLog, error)
}

type workoutUseCase struct {
    workoutRepo repository.WorkoutRepository
}

func NewWorkoutUseCase(workoutRepo repository.WorkoutRepository) WorkoutUseCase {
    return &workoutUseCase{workoutRepo: workoutRepo}
}

func (w *workoutUseCase) Create(ctx context.Context, workout *domain.Workout) error {
    if workout.Name == "" {
        return domain.ErrInvalidWorkout
    }
    workout.StartTime = time.Now()
    return w.workoutRepo.Create(ctx, workout)
}

func (w *workoutUseCase) GetByID(ctx context.Context, id int64) (*domain.Workout, error) {
    return w.workoutRepo.GetByID(ctx, id)
}

func (w *workoutUseCase) GetUserWorkouts(ctx context.Context, userID int64, limit, offset int) ([]*domain.Workout, error) {
    return w.workoutRepo.GetUserWorkouts(ctx, userID, limit, offset)
}

func (w *workoutUseCase) Update(ctx context.Context, workout *domain.Workout) error {
    return w.workoutRepo.Update(ctx, workout)
}

func (w *workoutUseCase) Delete(ctx context.Context, id int64) error {
    return w.workoutRepo.Delete(ctx, id)
}

func (w *workoutUseCase) EndWorkout(ctx context.Context, workoutID int64) error {
    workout, err := w.workoutRepo.GetByID(ctx, workoutID)
    if err != nil {
        return err
    }
    
    now := time.Now()
    workout.EndTime = &now
    workout.Duration = int(now.Sub(workout.StartTime).Seconds())
    
    return w.workoutRepo.Update(ctx, workout)
}

func (w *workoutUseCase) AddWorkoutLog(ctx context.Context, log *domain.WorkoutLog) error {
    return w.workoutRepo.CreateWorkoutLog(ctx, log)
}

func (w *workoutUseCase) GetWorkoutLogs(ctx context.Context, workoutID int64) ([]*domain.WorkoutLog, error) {
    return w.workoutRepo.GetWorkoutLogs(ctx, workoutID)
}

func (w *workoutUseCase) GetUserProgress(ctx context.Context, userID int64, exerciseID int64, days int) ([]*domain.WorkoutLog, error) {
    return w.workoutRepo.GetUserProgress(ctx, userID, exerciseID, days)
}</pre>
                </div>

                <h3>Auth Use Case (internal/usecase/auth_usecase.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package usecase

import (
    "context"
    "fitness-api/internal/domain"
    "fitness-api/internal/repository"
    "fitness-api/pkg/jwt"
    "fitness-api/pkg/password"
)

type AuthUseCase interface {
    Login(ctx context.Context, email, pass string) (string, *domain.User, error)
    ValidateToken(token string) (int64, error)
}

type authUseCase struct {
    userRepo  repository.UserRepository
    jwtSecret string
}

func NewAuthUseCase(userRepo repository.UserRepository, jwtSecret string) AuthUseCase {
    return &authUseCase{
        userRepo:  userRepo,
        jwtSecret: jwtSecret,
    }
}

func (a *authUseCase) Login(ctx context.Context, email, pass string) (string, *domain.User, error) {
    user, err := a.userRepo.GetByEmail(ctx, email)
    if err != nil {
        return "", nil, domain.ErrInvalidCredentials
    }
    
    if !password.Verify(user.Password, pass) {
        return "", nil, domain.ErrInvalidCredentials
    }
    
    token, err := jwt.GenerateToken(user.ID, a.jwtSecret)
    if err != nil {
        return "", nil, err
    }
    
    return token, user, nil
}

func (a *authUseCase) ValidateToken(token string) (int64, error) {
    return jwt.ValidateToken(token, a.jwtSecret)
}</pre>
                </div>
            </div>
        </div>

        <div id="repository" class="tab-content">
            <div class="section">
                <h2>üíæ Repository Layer</h2>
                <p>Data access interfaces and PostgreSQL implementations.</p>

                <h3>Repository Interfaces (internal/repository/repository.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package repository

import (
    "context"
    "fitness-api/internal/domain"
)

type UserRepository interface {
    Create(ctx context.Context, user *domain.User) error
    GetByID(ctx context.Context, id int64) (*domain.User, error)
    GetByEmail(ctx context.Context, email string) (*domain.User, error)
    GetByUsername(ctx context.Context, username string) (*domain.User, error)
    Update(ctx context.Context, user *domain.User) error
    Delete(ctx context.Context, id int64) error
}

type WorkoutRepository interface {
    Create(ctx context.Context, workout *domain.Workout) error
    GetByID(ctx context.Context, id int64) (*domain.Workout, error)
    GetUserWorkouts(ctx context.Context, userID int64, limit, offset int) ([]*domain.Workout, error)
    Update(ctx context.Context, workout *domain.Workout) error
    Delete(ctx context.Context, id int64) error
    
    CreateWorkoutLog(ctx context.Context, log *domain.WorkoutLog) error
    GetWorkoutLogs(ctx context.Context, workoutID int64) ([]*domain.WorkoutLog, error)
    GetUserProgress(ctx context.Context, userID int64, exerciseID int64, days int) ([]*domain.WorkoutLog, error)
}

type ExerciseRepository interface {
    Create(ctx context.Context, exercise *domain.Exercise) error
    GetByID(ctx context.Context, id int64) (*domain.Exercise, error)
    List(ctx context.Context, category, muscleGroup string, limit, offset int) ([]*domain.Exercise, error)
    Update(ctx context.Context, exercise *domain.Exercise) error
    Delete(ctx context.Context, id int64) error
    Search(ctx context.Context, query string) ([]*domain.Exercise, error)
}</pre>
                </div>

                <h3>User Repository (internal/repository/postgres/user_repository.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package postgres

import (
    "context"
    "database/sql"
    "fitness-api/internal/domain"
    "fitness-api/internal/repository"
    "time"
)

type userRepository struct {
    db *sql.DB
}

func NewUserRepository(db *sql.DB) repository.UserRepository {
    return &userRepository{db: db}
}

func (r *userRepository) Create(ctx context.Context, user *domain.User) error {
    query := `
        INSERT INTO users (email, username, password, full_name, bio, weight, height, created_at, updated_at)
        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
        RETURNING id
    `
    now := time.Now()
    user.CreatedAt = now
    user.UpdatedAt = now
    
    err := r.db.QueryRowContext(ctx, query,
        user.Email, user.Username, user.Password, user.FullName,
        user.Bio, user.Weight, user.Height, user.CreatedAt, user.UpdatedAt,
    ).Scan(&user.ID)
    
    return err
}

func (r *userRepository) GetByID(ctx context.Context, id int64) (*domain.User, error) {
    query := `
        SELECT id, email, username, password, full_name, bio, weight, height, created_at, updated_at
        FROM users WHERE id = $1
    `
    user := &domain.User{}
    err := r.db.QueryRowContext(ctx, query, id).Scan(
        &user.ID, &user.Email, &user.Username, &user.Password,
        &user.FullName, &user.Bio, &user.Weight, &user.Height,
        &user.CreatedAt, &user.UpdatedAt,
    )
    
    if err == sql.ErrNoRows {
        return nil, domain.ErrUserNotFound
    }
    return user, err
}

func (r *userRepository) GetByEmail(ctx context.Context, email string) (*domain.User, error) {
    query := `
        SELECT id, email, username, password, full_name, bio, weight, height, created_at, updated_at
        FROM users WHERE email = $1
    `
    user := &domain.User{}
    err := r.db.QueryRowContext(ctx, query, email).Scan(
        &user.ID, &user.Email, &user.Username, &user.Password,
        &user.FullName, &user.Bio, &user.Weight, &user.Height,
        &user.CreatedAt, &user.UpdatedAt,
    )
    
    if err == sql.ErrNoRows {
        return nil, domain.ErrUserNotFound
    }
    return user, err
}

func (r *userRepository) GetByUsername(ctx context.Context, username string) (*domain.User, error) {
    query := `
        SELECT id, email, username, password, full_name, bio, weight, height, created_at, updated_at
        FROM users WHERE username = $1
    `
    user := &domain.User{}
    err := r.db.QueryRowContext(ctx, query, username).Scan(
        &user.ID, &user.Email, &user.Username, &user.Password,
        &user.FullName, &user.Bio, &user.Weight, &user.Height,
        &user.CreatedAt, &user.UpdatedAt,
    )
    
    if err == sql.ErrNoRows {
        return nil, domain.ErrUserNotFound
    }
    return user, err
}

func (r *userRepository) Update(ctx context.Context, user *domain.User) error {
    query := `
        UPDATE users
        SET email = $1, username = $2, full_name = $3, bio = $4, 
            weight = $5, height = $6, updated_at = $7
        WHERE id = $8
    `
    user.UpdatedAt = time.Now()
    _, err := r.db.ExecContext(ctx, query,
        user.Email, user.Username, user.FullName, user.Bio,
        user.Weight, user.Height, user.UpdatedAt, user.ID,
    )
    return err
}

func (r *userRepository) Delete(ctx context.Context, id int64) error {
    query := `DELETE FROM users WHERE id = $1`
    _, err := r.db.ExecContext(ctx, query, id)
    return err
}</pre>
                </div>

                <h3>Workout Repository (internal/repository/postgres/workout_repository.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package postgres

import (
    "context"
    "database/sql"
    "fitness-api/internal/domain"
    "fitness-api/internal/repository"
    "time"
)

type workoutRepository struct {
    db *sql.DB
}

func NewWorkoutRepository(db *sql.DB) repository.WorkoutRepository {
    return &workoutRepository{db: db}
}

func (r *workoutRepository) Create(ctx context.Context, workout *domain.Workout) error {
    query := `
        INSERT INTO workouts (user_id, name, description, start_time, created_at, updated_at)
        VALUES ($1, $2, $3, $4, $5, $6)
        RETURNING id
    `
    now := time.Now()
    workout.CreatedAt = now
    workout.UpdatedAt = now
    
    return r.db.QueryRowContext(ctx, query,
        workout.UserID, workout.Name, workout.Description,
        workout.StartTime, workout.CreatedAt, workout.UpdatedAt,
    ).Scan(&workout.ID)
}

func (r *workoutRepository) GetByID(ctx context.Context, id int64) (*domain.Workout, error) {
    query := `
        SELECT id, user_id, name, description, start_time, end_time, 
               duration, notes, created_at, updated_at
        FROM workouts WHERE id = $1
    `
    workout := &domain.Workout{}
    err := r.db.QueryRowContext(ctx, query, id).Scan(
        &workout.ID, &workout.UserID, &workout.Name, &workout.Description,
        &workout.StartTime, &workout.EndTime, &workout.Duration,
        &workout.Notes, &workout.CreatedAt, &workout.UpdatedAt,
    )
    
    if err == sql.ErrNoRows {
        return nil, domain.ErrWorkoutNotFound
    }
    return workout, err
}

func (r *workoutRepository) GetUserWorkouts(ctx context.Context, userID int64, limit, offset int) ([]*domain.Workout, error) {
    query := `
        SELECT id, user_id, name, description, start_time, end_time,
               duration, notes, created_at, updated_at
        FROM workouts
        WHERE user_id = $1
        ORDER BY start_time DESC
        LIMIT $2 OFFSET $3
    `
    rows, err := r.db.QueryContext(ctx, query, userID, limit, offset)
    if err != nil {
        return nil, err
    }
    defer rows.Close()
    
    workouts := []*domain.Workout{}
    for rows.Next() {
        w := &domain.Workout{}
        err := rows.Scan(
            &w.ID, &w.UserID, &w.Name, &w.Description,
            &w.StartTime, &w.EndTime, &w.Duration,
            &w.Notes, &w.CreatedAt, &w.UpdatedAt,
        )
        if err != nil {
            return nil, err
        }
        workouts = append(workouts, w)
    }
    return workouts, rows.Err()
}

func (r *workoutRepository) Update(ctx context.Context, workout *domain.Workout) error {
    query := `
        UPDATE workouts
        SET name = $1, description = $2, end_time = $3, duration = $4,
            notes = $5, updated_at = $6
        WHERE id = $7
    `
    workout.UpdatedAt = time.Now()
    _, err := r.db.ExecContext(ctx, query,
        workout.Name, workout.Description, workout.EndTime, workout.Duration,
        workout.Notes, workout.UpdatedAt, workout.ID,
    )
    return err
}

func (r *workoutRepository) Delete(ctx context.Context, id int64) error {
    query := `DELETE FROM workouts WHERE id = $1`
    _, err := r.db.ExecContext(ctx, query, id)
    return err
}

func (r *workoutRepository) CreateWorkoutLog(ctx context.Context, log *domain.WorkoutLog) error {
    query := `
        INSERT INTO workout_logs (workout_id, exercise_id, sets, reps, weight, duration, distance, notes, created_at)
        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
        RETURNING id
    `
    log.CreatedAt = time.Now()
    return r.db.QueryRowContext(ctx, query,
        log.WorkoutID, log.ExerciseID, log.Sets, log.Reps,
        log.Weight, log.Duration, log.Distance, log.Notes, log.CreatedAt,
    ).Scan(&log.ID)
}

func (r *workoutRepository) GetWorkoutLogs(ctx context.Context, workoutID int64) ([]*domain.WorkoutLog, error) {
    query := `
        SELECT id, workout_id, exercise_id, sets, reps, weight, duration, distance, notes, created_at
        FROM workout_logs
        WHERE workout_id = $1
        ORDER BY created_at ASC
    `
    rows, err := r.db.QueryContext(ctx, query, workoutID)
    if err != nil {
        return nil, err
    }
    defer rows.Close()
    
    logs := []*domain.WorkoutLog{}
    for rows.Next() {
        log := &domain.WorkoutLog{}
        err := rows.Scan(
            &log.ID, &log.WorkoutID, &log.ExerciseID, &log.Sets,
            &log.Reps, &log.Weight, &log.Duration, &log.Distance,
            &log.Notes, &log.CreatedAt,
        )
        if err != nil {
            return nil, err
        }
        logs = append(logs, log)
    }
    return logs, rows.Err()
}

func (r *workoutRepository) GetUserProgress(ctx context.Context, userID int64, exerciseID int64, days int) ([]*domain.WorkoutLog, error) {
    query := `
        SELECT wl.id, wl.workout_id, wl.exercise_id, wl.sets, wl.reps, 
               wl.weight, wl.duration, wl.distance, wl.notes, wl.created_at
        FROM workout_logs wl
        JOIN workouts w ON wl.workout_id = w.id
        WHERE w.user_id = $1 AND wl.exercise_id = $2
          AND wl.created_at >= NOW() - INTERVAL '$3 days'
        ORDER BY wl.created_at DESC
    `
    rows, err := r.db.QueryContext(ctx, query, userID, exerciseID, days)
    if err != nil {
        return nil, err
    }
    defer rows.Close()
    
    logs := []*domain.WorkoutLog{}
    for rows.Next() {
        log := &domain.WorkoutLog{}
        err := rows.Scan(
            &log.ID, &log.WorkoutID, &log.ExerciseID, &log.Sets,
            &log.Reps, &log.Weight, &log.Duration, &log.Distance,
            &log.Notes, &log.CreatedAt,
        )
        if err != nil {
            return nil, err
        }
        logs = append(logs, log)
    }
    return logs, rows.Err()
}</pre>
                </div>
            </div>
        </div>

        <div id="handlers" class="tab-content">
            <div class="section">
                <h2>üåê HTTP Handlers</h2>
                <p>Delivery layer with Gin framework handlers and middleware.</p>

                <h3>Auth Handler (internal/delivery/http/handler/auth_handler.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package handler

import (
    "fitness-api/internal/domain"
    "fitness-api/internal/usecase"
    "net/http"
    
    "github.com/gin-gonic/gin"
)

type AuthHandler struct {
    authUseCase usecase.AuthUseCase
    userUseCase usecase.UserUseCase
}

func NewAuthHandler(authUC usecase.AuthUseCase, userUC usecase.UserUseCase) *AuthHandler {
    return &AuthHandler{
        authUseCase: authUC,
        userUseCase: userUC,
    }
}

func (h *AuthHandler) RegisterRoutes(router *gin.RouterGroup) {
    auth := router.Group("/auth")
    {
        auth.POST("/register", h.Register)
        auth.POST("/login", h.Login)
    }
}

type RegisterRequest struct {
    Email    string  `json:"email" binding:"required,email"`
    Username string  `json:"username" binding:"required,min=3"`
    Password string  `json:"password" binding:"required,min=8"`
    FullName string  `json:"full_name"`
    Weight   float64 `json:"weight"`
    Height   float64 `json:"height"`
}

type LoginRequest struct {
    Email    string `json:"email" binding:"required,email"`
    Password string `json:"password" binding:"required"`
}

type AuthResponse struct {
    Token string       `json:"token"`
    User  *domain.User `json:"user"`
}

func (h *AuthHandler) Register(c *gin.Context) {
    var req RegisterRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    
    user := &domain.User{
        Email:    req.Email,
        Username: req.Username,
        Password: req.Password,
        FullName: req.FullName,
        Weight:   req.Weight,
        Height:   req.Height,
    }
    
    if err := h.userUseCase.Register(c.Request.Context(), user); err != nil {
        if err == domain.ErrDuplicateEmail || err == domain.ErrDuplicateUsername {
            c.JSON(http.StatusConflict, gin.H{"error": err.Error()})
            return
        }
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    // Auto login after registration
    token, _, err := h.authUseCase.Login(c.Request.Context(), req.Email, req.Password)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": "registration successful but login failed"})
        return
    }
    
    c.JSON(http.StatusCreated, AuthResponse{Token: token, User: user})
}

func (h *AuthHandler) Login(c *gin.Context) {
    var req LoginRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    
    token, user, err := h.authUseCase.Login(c.Request.Context(), req.Email, req.Password)
    if err != nil {
        if err == domain.ErrInvalidCredentials {
            c.JSON(http.StatusUnauthorized, gin.H{"error": err.Error()})
            return
        }
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, AuthResponse{Token: token, User: user})
}</pre>
                </div>

                <h3>Workout Handler (internal/delivery/http/handler/workout_handler.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package handler

import (
    "fitness-api/internal/domain"
    "fitness-api/internal/usecase"
    "net/http"
    "strconv"
    
    "github.com/gin-gonic/gin"
)

type WorkoutHandler struct {
    workoutUseCase usecase.WorkoutUseCase
}

func NewWorkoutHandler(workoutUC usecase.WorkoutUseCase) *WorkoutHandler {
    return &WorkoutHandler{workoutUseCase: workoutUC}
}

func (h *WorkoutHandler) RegisterRoutes(router *gin.RouterGroup) {
    workouts := router.Group("/workouts")
    {
        workouts.POST("", h.CreateWorkout)
        workouts.GET("/:id", h.GetWorkout)
        workouts.GET("", h.GetUserWorkouts)
        workouts.PUT("/:id", h.UpdateWorkout)
        workouts.DELETE("/:id", h.DeleteWorkout)
        workouts.POST("/:id/end", h.EndWorkout)
        
        workouts.POST("/:id/logs", h.AddWorkoutLog)
        workouts.GET("/:id/logs", h.GetWorkoutLogs)
    }
    
    router.GET("/progress/:exerciseId", h.GetProgress)
}

type CreateWorkoutRequest struct {
    Name        string `json:"name" binding:"required"`
    Description string `json:"description"`
}

func (h *WorkoutHandler) CreateWorkout(c *gin.Context) {
    userID := c.GetInt64("user_id") // Set by auth middleware
    
    var req CreateWorkoutRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    
    workout := &domain.Workout{
        UserID:      userID,
        Name:        req.Name,
        Description: req.Description,
    }
    
    if err := h.workoutUseCase.Create(c.Request.Context(), workout); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusCreated, workout)
}

func (h *WorkoutHandler) GetWorkout(c *gin.Context) {
    id, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    workout, err := h.workoutUseCase.GetByID(c.Request.Context(), id)
    if err != nil {
        if err == domain.ErrWorkoutNotFound {
            c.JSON(http.StatusNotFound, gin.H{"error": err.Error()})
            return
        }
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, workout)
}

func (h *WorkoutHandler) GetUserWorkouts(c *gin.Context) {
    userID := c.GetInt64("user_id")
    limit, _ := strconv.Atoi(c.DefaultQuery("limit", "20"))
    offset, _ := strconv.Atoi(c.DefaultQuery("offset", "0"))
    
    workouts, err := h.workoutUseCase.GetUserWorkouts(c.Request.Context(), userID, limit, offset)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, workouts)
}

func (h *WorkoutHandler) UpdateWorkout(c *gin.Context) {
    id, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    var req CreateWorkoutRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    
    workout, err := h.workoutUseCase.GetByID(c.Request.Context(), id)
    if err != nil {
        c.JSON(http.StatusNotFound, gin.H{"error": err.Error()})
        return
    }
    
    workout.Name = req.Name
    workout.Description = req.Description
    
    if err := h.workoutUseCase.Update(c.Request.Context(), workout); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, workout)
}

func (h *WorkoutHandler) DeleteWorkout(c *gin.Context) {
    id, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    if err := h.workoutUseCase.Delete(c.Request.Context(), id); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusNoContent, nil)
}

func (h *WorkoutHandler) EndWorkout(c *gin.Context) {
    id, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    if err := h.workoutUseCase.EndWorkout(c.Request.Context(), id); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, gin.H{"message": "workout ended"})
}

type AddWorkoutLogRequest struct {
    ExerciseID int64   `json:"exercise_id" binding:"required"`
    Sets       int     `json:"sets"`
    Reps       int     `json:"reps"`
    Weight     float64 `json:"weight"`
    Duration   int     `json:"duration"`
    Distance   float64 `json:"distance"`
    Notes      string  `json:"notes"`
}

func (h *WorkoutHandler) AddWorkoutLog(c *gin.Context) {
    workoutID, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    var req AddWorkoutLogRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }
    
    log := &domain.WorkoutLog{
        WorkoutID:  workoutID,
        ExerciseID: req.ExerciseID,
        Sets:       req.Sets,
        Reps:       req.Reps,
        Weight:     req.Weight,
        Duration:   req.Duration,
        Distance:   req.Distance,
        Notes:      req.Notes,
    }
    
    if err := h.workoutUseCase.AddWorkoutLog(c.Request.Context(), log); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusCreated, log)
}

func (h *WorkoutHandler) GetWorkoutLogs(c *gin.Context) {
    workoutID, err := strconv.ParseInt(c.Param("id"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid workout id"})
        return
    }
    
    logs, err := h.workoutUseCase.GetWorkoutLogs(c.Request.Context(), workoutID)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, logs)
}

func (h *WorkoutHandler) GetProgress(c *gin.Context) {
    userID := c.GetInt64("user_id")
    exerciseID, err := strconv.ParseInt(c.Param("exerciseId"), 10, 64)
    if err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": "invalid exercise id"})
        return
    }
    
    days, _ := strconv.Atoi(c.DefaultQuery("days", "30"))
    
    progress, err := h.workoutUseCase.GetUserProgress(c.Request.Context(), userID, exerciseID, days)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(http.StatusOK, progress)
}</pre>
                </div>

                <h3>Auth Middleware (internal/delivery/http/middleware/auth.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package middleware

import (
    "fitness-api/internal/domain"
    "fitness-api/internal/usecase"
    "net/http"
    "strings"
    
    "github.com/gin-gonic/gin"
)

func AuthMiddleware(authUseCase usecase.AuthUseCase) gin.HandlerFunc {
    return func(c *gin.Context) {
        authHeader := c.GetHeader("Authorization")
        if authHeader == "" {
            c.JSON(http.StatusUnauthorized, gin.H{"error": domain.ErrUnauthorized.Error()})
            c.Abort()
            return
        }
        
        parts := strings.Split(authHeader, " ")
        if len(parts) != 2 || parts[0] != "Bearer" {
            c.JSON(http.StatusUnauthorized, gin.H{"error": "invalid authorization header format"})
            c.Abort()
            return
        }
        
        token := parts[1]
        userID, err := authUseCase.ValidateToken(token)
        if err != nil {
            c.JSON(http.StatusUnauthorized, gin.H{"error": domain.ErrInvalidToken.Error()})
            c.Abort()
            return
        }
        
        c.Set("user_id", userID)
        c.Next()
    }
}</pre>
                </div>

                <h3>Router Setup (internal/delivery/http/router.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package http

import (
    "fitness-api/internal/delivery/http/handler"
    "fitness-api/internal/delivery/http/middleware"
    "fitness-api/internal/usecase"
    
    "github.com/gin-gonic/gin"
)

func SetupRouter(
    authUC usecase.AuthUseCase,
    userUC usecase.UserUseCase,
    workoutUC usecase.WorkoutUseCase,
    exerciseUC usecase.ExerciseUseCase,
) *gin.Engine {
    router := gin.Default()
    
    // Global middleware
    router.Use(middleware.CORSMiddleware())
    
    // Health check
    router.GET("/health", func(c *gin.Context) {
        c.JSON(200, gin.H{"status": "healthy"})
    })
    
    // API v1
    v1 := router.Group("/api/v1")
    {
        // Auth routes (public)
        authHandler := handler.NewAuthHandler(authUC, userUC)
        authHandler.RegisterRoutes(v1)
        
        // Protected routes
        protected := v1.Group("")
        protected.Use(middleware.AuthMiddleware(authUC))
        {
            // User routes
            userHandler := handler.NewUserHandler(userUC)
            userHandler.RegisterRoutes(protected)
            
            // Workout routes
            workoutHandler := handler.NewWorkoutHandler(workoutUC)
            workoutHandler.RegisterRoutes(protected)
            
            // Exercise routes
            exerciseHandler := handler.NewExerciseHandler(exerciseUC)
            exerciseHandler.RegisterRoutes(protected)
        }
    }
    
    return router
}</pre>
                </div>
            </div>
        </div>

        <div id="main" class="tab-content">
            <div class="section">
                <h2>üöÄ Setup & Deployment</h2>

                <h3>Main Entry Point (cmd/server/main.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package main

import (
    "database/sql"
    "fmt"
    "log"
    "os"
    
    "fitness-api/config"
    httpDelivery "fitness-api/internal/delivery/http"
    "fitness-api/internal/repository/postgres"
    "fitness-api/internal/usecase"
    
    _ "github.com/lib/pq"
)

func main() {
    cfg := config.Load()
    
    // Database connection
    db, err := sql.Open("postgres", cfg.DatabaseURL)
    if err != nil {
        log.Fatal("Failed to connect to database:", err)
    }
    defer db.Close()
    
    if err := db.Ping(); err != nil {
        log.Fatal("Failed to ping database:", err)
    }
    
    log.Println("‚úì Database connected")
    
    // Initialize repositories
    userRepo := postgres.NewUserRepository(db)
    workoutRepo := postgres.NewWorkoutRepository(db)
    exerciseRepo := postgres.NewExerciseRepository(db)
    
    // Initialize use cases
    userUseCase := usecase.NewUserUseCase(userRepo)
    authUseCase := usecase.NewAuthUseCase(userRepo, cfg.JWTSecret)
    workoutUseCase := usecase.NewWorkoutUseCase(workoutRepo)
    exerciseUseCase := usecase.NewExerciseUseCase(exerciseRepo)
    
    // Setup HTTP server
    router := httpDelivery.SetupRouter(
        authUseCase,
        userUseCase,
        workoutUseCase,
        exerciseUseCase,
    )
    
    // Start server
    addr := fmt.Sprintf(":%s", cfg.Port)
    log.Printf("üöÄ Server starting on %s", addr)
    
    if err := router.Run(addr); err != nil {
        log.Fatal("Failed to start server:", err)
    }
}</pre>
                </div>

                <h3>Configuration (config/config.go)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>package config

import (
    "log"
    "os"
    
    "github.com/joho/godotenv"
)

type Config struct {
    DatabaseURL string
    Port        string
    JWTSecret   string
}

func Load() *Config {
    if err := godotenv.Load(); err != nil {
        log.Println("No .env file found, using environment variables")
    }
    
    return &Config{
        DatabaseURL: getEnv("DATABASE_URL", "postgres://postgres:postgres@localhost:5432/fitness_db?sslmode=disable"),
        Port:        getEnv("PORT", "8080"),
        JWTSecret:   getEnv("JWT_SECRET", "your-secret-key-change-in-production"),
    }
}

func getEnv(key, defaultValue string) string {
    if value := os.Getenv(key); value != "" {
        return value
    }
    return defaultValue
}</pre>
                </div>

                <h3>Environment Variables (.env.example)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>DATABASE_URL=postgres://postgres:postgres@localhost:5432/fitness_db?sslmode=disable
PORT=8080
JWT_SECRET=your-super-secret-jwt-key-change-this</pre>
                </div>

                <h3>Docker Compose (docker-compose.yml)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    container_name: fitness_db
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: fitness_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

  app:
    build: .
    container_name: fitness_api
    ports:
      - "8080:8080"
    depends_on:
      postgres:
        condition: service_healthy
    environment:
      DATABASE_URL: postgres://postgres:postgres@postgres:5432/fitness_db?sslmode=disable
      PORT: 8080
      JWT_SECRET: your-super-secret-jwt-key
    restart: unless-stopped

volumes:
  postgres_data:</pre>
                </div>

                <h3>Dockerfile</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>FROM golang:1.21-alpine AS builder

WORKDIR /app

COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -o fitness-api cmd/server/main.go

FROM alpine:latest

RUN apk --no-cache add ca-certificates

WORKDIR /root/

COPY --from=builder /app/fitness-api .

EXPOSE 8080

CMD ["./fitness-api"]</pre>
                </div>

                <h3>Database Migration (migrations/001_create_users.up.sql)</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>CREATE TABLE IF NOT EXISTS users (
    id BIGSERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    username VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    full_name VARCHAR(255),
    bio TEXT,
    weight DECIMAL(5,2),
    height DECIMAL(5,2),
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_username ON users(username);</pre>
                </div>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>-- migrations/002_create_exercises.up.sql
CREATE TABLE IF NOT EXISTS exercises (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    category VARCHAR(100),
    muscle_group VARCHAR(100),
    equipment VARCHAR(100),
    video_url VARCHAR(500),
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_exercises_category ON exercises(category);
CREATE INDEX idx_exercises_muscle_group ON exercises(muscle_group);</pre>
                </div>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>-- migrations/003_create_workouts.up.sql
CREATE TABLE IF NOT EXISTS workouts (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP,
    duration INTEGER,
    notes TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_workouts_user_id ON workouts(user_id);
CREATE INDEX idx_workouts_start_time ON workouts(start_time DESC);</pre>
                </div>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre>-- migrations/004_create_workout_logs.up.sql
CREATE TABLE IF NOT EXISTS workout_logs (
    id BIGSERIAL PRIMARY KEY,
    workout_id BIGINT NOT NULL REFERENCES workouts(id) ON DELETE CASCADE,
    exercise_id BIGINT NOT NULL REFERENCES exercises(id) ON DELETE CASCADE,
    sets INTEGER,
    reps INTEGER,
    weight DECIMAL(5,2),
    duration INTEGER,
    distance DECIMAL(6,2),
    notes TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_workout_logs_workout_id ON workout_logs(workout_id);
CREATE INDEX idx_workout_logs_exercise_id ON workout_logs(exercise_id);
CREATE INDEX idx_workout_logs_created_at ON workout_logs(created_at DESC);</pre>
                </div>

                <h3>Setup Commands</h3>
                <div class="command">
                    <code># Initialize Go module</code>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <div class="code-block">
                    <pre>go mod init fitness-api</pre>
                </div>

                <div class="command">
                    <code># Install dependencies</code>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <div class="code-block">
                    <pre>go get github.com/gin-gonic/gin
go get github.com/lib/pq
go get github.com/golang-jwt/jwt/v5
go get github.com/joho/godotenv
go get golang.org/x/crypto/bcrypt</pre>
                </div>

                <div class="command">
                    <code># Start PostgreSQL with Docker</code>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <div class="code-block">
                    <pre>docker-compose up -d postgres</pre>
                </div>

                <div class="command">
                    <code># Run migrations</code>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <div class="code-block">
                    <pre>go install -tags 'postgres' github.com/golang-migrate/migrate/v4/cmd/migrate@latest
migrate -path migrations -database "postgres://postgres:postgres@localhost:5432/fitness_db?sslmode=disable" up</pre>
                </div>

                <div class="command">
                    <code># Run the server</code>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <div class="code-block">
                    <pre>go run cmd/server/main.go</pre>
                </div>

                <div class="info-box">
                    <h4>üì± React Native Integration</h4>
                    <p>Your React Native (Expo) frontend can connect to this API using fetch or axios:</p>
                </div>
                <div class="code-block">
                    <pre>// Example: Login from React Native
const API_URL = 'http://localhost:8080/api/v1';

async function login(email, password) {
  const response = await fetch(`${API_URL}/auth/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password })
  });
  
  const data = await response.json();
  // Store token in AsyncStorage
  await AsyncStorage.setItem('token', data.token);
  return data.user;
}</pre>
                </div>
            </div>
        </div>

        <div id="api" class="tab-content">
            <div class="section">
                <h2>üì° API Documentation</h2>
                <p>Complete REST API endpoints for your fitness app.</p>

                <h3>Authentication Endpoints</h3>
                
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/auth/register</span>
                </div>
                <div class="code-block">
                    <pre>{
  "email": "user@example.com",
  "username": "johndoe",
  "password": "securepass123",
  "full_name": "John Doe",
  "weight": 75.5,
  "height": 180
}</pre>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/auth/login</span>
                </div>
                <div class="code-block">
                    <pre>{
  "email": "user@example.com",
  "password": "securepass123"
}</pre>
                </div>

                <h3>User Endpoints</h3>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/users/me</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">Get current user profile (requires auth)</p>

                <div class="endpoint">
                    <span class="method put">PUT</span>
                    <span>/api/v1/users/me</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">Update current user profile</p>

                <div class="endpoint">
                    <span class="method put">PUT</span>
                    <span>/api/v1/users/me/weight</span>
                </div>
                <div class="code-block">
                    <pre>{ "weight": 76.2 }</pre>
                </div>

                <h3>Workout Endpoints</h3>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/workouts</span>
                </div>
                <div class="code-block">
                    <pre>{
  "name": "Morning Chest Day",
  "description": "Heavy chest and triceps workout"
}</pre>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/workouts?limit=20&offset=0</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">Get user's workout history</p>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/workouts/:id</span>
                </div>

                <div class="endpoint">
                    <span class="method put">PUT</span>
                    <span>/api/v1/workouts/:id</span>
                </div>

                <div class="endpoint">
                    <span class="method delete">DELETE</span>
                    <span>/api/v1/workouts/:id</span>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/workouts/:id/end</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">End active workout (sets end_time and duration)</p>

                <h3>Workout Log Endpoints</h3>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/workouts/:id/logs</span>
                </div>
                <div class="code-block">
                    <pre>{
  "exercise_id": 1,
  "sets": 3,
  "reps": 10,
  "weight": 80.0,
  "notes": "Felt strong today"
}</pre>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/workouts/:id/logs</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">Get all exercise logs for a workout</p>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/progress/:exerciseId?days=30</span>
                </div>
                <p style="margin-left: 20px; color: var(--color-text-secondary);">Get user's progress for specific exercise over time</p>

                <h3>Exercise Endpoints</h3>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/exercises?category=Strength&muscle_group=Chest</span>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/exercises/:id</span>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span>/api/v1/exercises/search?q=bench press</span>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span>/api/v1/exercises</span>
                </div>
                <div class="code-block">
                    <pre>{
  "name": "Bench Press",
  "description": "Classic chest exercise",
  "category": "Strength",
  "muscle_group": "Chest",
  "equipment": "Barbell",
  "video_url": "https://example.com/video"
}</pre>
                </div>

                <div class="info-box">
                    <h4>üîê Authentication</h4>
                    <p>Protected endpoints require JWT token in Authorization header:</p>
                    <code style="color: var(--color-success);">Authorization: Bearer &lt;your-jwt-token&gt;</code>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active from all buttons
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function copyCode(button) {
            const codeBlock = button.parentElement;
            const code = codeBlock.querySelector('pre').textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }
    </script>
</body>
</html>
